{% extends "base.html" %}
{% load static %}

{% load widget_tweaks %}

{% block content %}

  <main id="main">

    <!-- ======= Breadcrumbs ======= -->
    <div class="breadcrumbs">
      <div class="page-header d-flex align-items-center" style="background-image: url('');">
        <div class="container position-relative">
          <div class="row d-flex justify-content-center">
            <div class="col-lg-6 text-center">
              <h2>Blog Details</h2>
            </div>
          </div>
        </div>
      </div>
      <nav>
        <div class="container">
          <ol>
            <li><a href="index.html">Home</a></li>
            <li>Blog Details</li>
          </ol>
        </div>
      </nav>
    </div><!-- End Breadcrumbs -->

    <!-- ======= Blog Details Section ======= -->
    <section id="blog" class="blog">
      <div class="container" data-aos="fade-up">

        <div class="row g-5">

          <div class="col-lg-8">

            <article class="blog-details">

              <div class="post-img">
                <img src="{{ blog.blog_image.url }}" alt="" class="img-fluid">
              </div>

              <h2 class="title">{{ blog.title }}</h2>

              <div class="meta-top">
                <ul>
                  <li class="d-flex align-items-center"><i class="bi bi-person"></i> <a href="blog-details.html">{{ blog.author }}</a></li>
                  <li class="d-flex align-items-center"><i class="bi bi-clock"></i> <a href="blog-details.html"><time datetime="{{ blog.created_at|date:'Y-m-d' }}">{{ blog.created_at|date:'M d, Y' }}</time></a></li>
                </ul>
              </div><!-- End meta top -->

              <div class="content">
               
                 <p>{{ blog.content|safe }}</p>
    

   
     
   

              </div><!-- End post content -->


            </article><!-- End blog post -->


          </div>

          <div class="col-lg-4">

            <div class="sidebar">


              <div class="sidebar-item recent-posts">
                <h3 class="sidebar-title">Recent Posts</h3>

                <div class="mt-3">
                    {% for blog in recent_blogs %}
                  <div class="post-item mt-3">
                    <img src="{{ blog.blog_image.url }}" alt="">
                    <div>
                      <h4><a href="{% url 'blogdetail' blog_id=blog.id %}">{{ blog.title|truncatechars:40 }}</a></h4>
                      <time datetime="{{ blog.created_at|date:'Y-m-d' }}">{{ blog.created_at|date:'M d, Y' }}</time>
                    </div>
                  </div><!-- End recent post item-->

                  {% endfor %}

                </div>

              </div><!-- End sidebar recent posts-->


            </div><!-- End Blog Sidebar -->

          </div>
        </div>
              <div class="blog__details__option">
                <div class="row">
              
                  {% if previous_blog %}
                  <div class="col-lg-6 col-md-6 col-sm-6">
                    <a href="{% url 'blogdetail' blog_id=previous_blog.id %}" class="blog__option__btn">
                      <h6 class="option__btn__name"><i class="fa fa-angle-left"></i> Previous posts</h6>
                      <div class="blog__option__btn__item">
                        <div class="blog__option__btn__pic">
                          <img src="{{ previous_blog.blog_image.url }}" alt="{{ previous_blog.title }}">
                        </div>
                        <div class="blog__option__btn__text">
                          <h6>{{ previous_blog.title|truncatewords:6 }}</h6>
                          <span>{{ previous_blog.author }}</span>
                        </div>
                      </div>
                    </a>
                  </div>
                  {% endif %}
              
                  {% if next_blog %}
                  <div class="col-lg-6 col-md-6 col-sm-6">
                    <a href="{% url 'blogdetail' blog_id=next_blog.id %}" class="blog__option__btn blog__option__btn--next">
                      <h6 class="option__btn__name">Next posts <i class="fa fa-angle-right"></i></h6>
                      <div class="blog__option__btn__item">
                        <div class="blog__option__btn__pic">
                          <img src="{{ next_blog.blog_image.url }}" alt="{{ next_blog.title }}">
                        </div>
                        <div class="blog__option__btn__text">
                          <h6>{{ next_blog.title|truncatewords:6 }}</h6>
                          <span>{{ next_blog.created_at|date:"M d, Y" }}</span>
                        </div>
                      </div>
                    </a>
                  </div>
                  {% endif %}
              
                </div>
              </div>
              <hr>
              <div class="comments-list">
                <h3>{{ comments.count }} Comment{{ comments.count|pluralize }}</h3>
                {% for comment in comments %}
                <div class="comment">
                  <div class="comment-header">
                    <div class="comment-avatar">
                      {{ comment.name|first|upper }}
                    </div>
                    <div>
                      <div class="comment-author">{{ comment.name }}</div>
                      <div class="comment-date">{{ comment.created_at|date:"M d, Y" }}</div>
                    </div>
                  </div>
                  <div class="comment-text">
                    {{ comment.comment|linebreaksbr }}
                  </div>
                </div>
                {% empty %}
                <p>No comments yet. Be the first!</p>
                {% endfor %}
              </div>
              <div class="blog__details__services">
                <div class="row">
                  <div class="col-lg-12">
                    <div class="blog__details__services__title">
                      <h4>You may also like</h4>
                    </div>
                  </div>
                </div>
                <div class="row">
                  {% for blog in recent_blogs %}
                  <div class="col-lg-4 col-md-6 col-sm-6">
                    <div class="blog__details__services__item">
                      <div class="blog__details__services__item__pic">
                        <img src="{{ blog.blog_image.url }}" alt="{{ blog.title }}">
                      </div>
                      <div class="blog__details__services__item__text">
                        <h6>
                          <a href="{% url 'blogdetail' blog_id=blog.id %}">
                            {{ blog.title|truncatechars:40 }}
                          </a>
                        </h6>
                        <span>{{ blog.created_at|date:"M d, Y" }}</span>
                      </div>
                    </div>
                  </div>
                  {% endfor %}
                </div>
              </div>
              <hr>
              <!-- Comment Form -->
              <div class="blog__details__form">
                <div class="blog__details__form__title">
                  <h4>Leave a comment</h4>
                </div>
                <form method="post">
                  {% csrf_token %}
                  <div class="row">
                    <div class="col-lg-4 col-md-4">
                      <div class="form-group">
                        {{ form.name.label_tag }}
                        {{ form.name|add_class:"form-control" }}
                        {{ form.name.errors }}
                      </div>
                    </div>
                    <div class="col-lg-4 col-md-4">
                      <div class="form-group">
                        {{ form.email.label_tag }}
                        {{ form.email|add_class:"form-control" }}
                        {{ form.email.errors }}
                      </div>
                    </div>
                    <div class="col-lg-4 col-md-4">
                      <div class="form-group">
                        {{ form.phone_number.label_tag }}
                        {{ form.phone_number|add_class:"form-control" }}
                        {{ form.phone_number.errors }}
                      </div>
                    </div>
                    <div class="col-lg-12">
                      <div class="form-group">
                        {{ form.comment.label_tag }}
                        {{ form.comment|add_class:"form-control" }}
                        {{ form.comment.errors }}
                      </div>
                    </div>
                  </div>
              
                  <button type="submit" class="site-btn">Send Message</button>
                </form>
              </div>
      </div>
    </section><!-- End Blog Details Section -->

  </main><!-- End #main -->

{% endblock content %}